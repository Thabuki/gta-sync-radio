<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GTA 3D Era Radio Player</title>
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/carousel.css" />
    <link rel="stylesheet" href="css/modal.css" />
    <link rel="stylesheet" href="css/responsive.css" />
  </head>
  <body>
    <div id="bgFader" class="bg-fader" aria-hidden="true"></div>
    <div class="container">
      <header>
        <div class="game-logo-container">
          <img id="gameLogo" src="" alt="Game Logo" class="game-logo" />
        </div>
        <h1>Radio Stations</h1>
        <p class="subtitle">Listen together in sync<span title="Sync might drift ~20s between users due to network latency, buffering, and browser timing differences.">(ish)</span>.</p>
      </header>

      <div class="carousel-container">
        <button class="carousel-arrow carousel-arrow-left" id="prevBtn">
          ‚Äπ
        </button>
        <div class="carousel-wrapper">
          <div class="radio-carousel" id="radioCarousel">
            <!-- Radio stations will be populated by JavaScript -->
          </div>
        </div>
        <button class="carousel-arrow carousel-arrow-right" id="nextBtn">
          ‚Ä∫
        </button>
      </div>

      <div class="station-info" id="stationInfo">
        <h2 id="currentStationName">Select a radio station</h2>
        <p id="currentDJ"></p>
      </div>
    </div>

    <!-- Modal for radio player -->
    <div id="radioModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <div class="player-header">
          <img id="modalLogo" src="" alt="Radio Logo" class="modal-logo" />
          <div class="player-info">
            <h2 id="modalStationName"></h2>
            <p id="modalDJ" class="dj-name"></p>
            <p id="modalGenre" class="genre-name"></p>
          </div>
        </div>

        <div class="audio-player">
          <div id="audioErrorModal" class="audio-error-modal" hidden role="alertdialog" aria-modal="true" aria-labelledby="audioErrorTitle">
            <div class="error-content">
              <h2 id="audioErrorTitle">Audio Error</h2>
              <p id="audioErrorMsg">Failed to load or play audio.</p>
              <button id="audioRetryBtn" class="retry-btn">Retry</button>
            </div>
          </div>
          <audio
            id="audioPlayer"
            controls
            controlsList="nodownload noplaybackrate noremoteplayback"
            disablepictureinpicture
            oncontextmenu="return false;"
          >
            Your browser does not support the audio element.
          </audio>
          <div class="sync-info">
            <button id="resyncBtn" class="resync-btn" title="Syncs to Unix epoch time: seeks to (seconds since Jan 1 1970 UTC) mod station length">üïê Re-sync</button>
          </div>
          <div class="tracklist">
            <h3>Tracklist</h3>
            <ul id="tracklistContent"></ul>
          </div>
        </div>
        </div>
      </div>
    </div>

    <!-- Now Playing Toast -->
    <div
      id="nowPlayingToast"
      aria-live="polite"
      aria-atomic="true"
      class="now-playing-toast"
      hidden
    >
      <img id="toastLogo" alt="Station Logo" />
      <div class="toast-text">
        <strong id="toastTitle">Now Playing</strong>
        <span id="toastStation"></span>
      </div>
    </div>

    <script src="js/data/gtaiii-stations.js"></script>
    <script src="js/data/gtavc-stations.js"></script>
    <script src="js/data/gtasa-stations.js"></script>
    <script src="js/carousel.js"></script>
    <script src="js/player.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
